{"version":3,"file":"auth-sdk.umd.js","sources":["../node_modules/tslib/tslib.es6.js","../src/interceptor/token/utils.ts","../src/interceptor/token/axios.ts","../src/interceptor/token/angular.ts","../src/interceptor/token/urlWithToken.ts","../src/utils/request.ts","../src/utils/parseUrl.ts","../src/constants/url.ts","../src/function/login/buildLoginParams.ts","../src/function/login/authorize.ts","../src/utils/getContainer.ts","../src/components/TopBodyOverflow.tsx","../src/components/Modal.tsx","../src/constants/antdPrefix.ts","../src/function/login/popupLoginBox.tsx","../src/function/setGlobalContextMe.ts","../src/constants/whoAmIHostKey.ts","../src/utils/compatibilityMe/getIsAdmin.ts","../src/utils/compatibilityMe/index.ts","../src/function/requestMe.ts","../src/function/requestOpBaseUrl.ts","../src/function/login/loginByPopup.ts","../src/utils/promise-reflect.ts","../src/utils/requestByImage.ts","../src/function/logout/doLogout.ts","../src/function/logout/index.ts","../src/function/register.ts","../src/function/login/buildLoginQueryString.ts","../src/constants/namespace.ts","../src/function/meSelector.ts","../src/function/requestMeTrySSO.ts","../src/function/login/loginByPage.ts","../src/LoginOrRegister/LoginOrRegisterContext.ts","../src/imgs/defaultAvatar.svg","../src/LoginOrRegister/Me/Avatar.tsx","../src/LoginOrRegister/Me/Logout.tsx","../src/LoginOrRegister/Me/PopoverContent.tsx","../src/LoginOrRegister/Me/Me.tsx","../src/LoginOrRegister/Register.tsx","../src/hooks/useMe.ts","../src/LoginOrRegister/hooks/useTryGetMe.ts","../src/LoginOrRegister/Or.tsx","../src/LoginOrRegister/LoginOrRegister.tsx","../src/LoginOrRegister/Login.tsx","../src/LoginOrRegister/LoginByPageOrRegister.tsx","../src/LoginOrRegister/LoginByPopupOrRegister.tsx","../src/enums/OrgIdentityType.ts","../src/enums/RoleType.ts","../src/enums/UserIdentity.ts","../src/enums/UIType.ts","../src/utils/tokenUtils/cache.ts","../src/utils/tokenUtils/getTokenLegacy.ts","../src/utils/tokenUtils/getTokenCacheWithKey.ts","../src/utils/tokenUtils/cacheTokenAndParamKey.ts","../src/utils/tokenUtils/jumpWithToken.ts","../src/interceptor/headerTokenLegacy/setHeaderToken.ts","../src/interceptor/headerTokenLegacy/axios.ts","../src/interceptor/headerTokenLegacy/angular.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { HeaderTokenArgsI } from './types';\n\n/**\n * 获取 cookies 中的 token\n */\nexport const getToken = (authCookieKey: string = 'Auth', authScheme: string = 'Auth') => {\n  try {\n    if (document.cookie && document.cookie.length > 0) {\n      const cookies = document.cookie.split(/\\s*;\\s*/);\n      if (cookies && cookies.length > 0) {\n        const cookieAuth = cookies.find(cookie => cookie.startsWith(authCookieKey));\n        const auth = cookieAuth ? cookieAuth.split('=')[1] : null;\n        return auth && authScheme ? `${authScheme} ${auth}` : auth;\n      }\n    }\n    return null;\n  } catch {\n    return null;\n  }\n};\n\nexport const defaults = ({\n  platDomain = window.location.host,\n  platDomainKey = '__platDomain__',\n  notSetPlatDomain = false,\n  authCookieKey = 'Auth',\n  authHeaderKey = 'Authorization',\n  authScheme = 'Auth',\n  notSetAuthHeader = false,\n}: HeaderTokenArgsI = {}) => ({\n  platDomain,\n  platDomainKey,\n  notSetPlatDomain,\n  authCookieKey,\n  authHeaderKey,\n  authScheme,\n  notSetAuthHeader,\n});\n","import { AxiosRequestConfig } from 'axios';\nimport { HeaderTokenArgsI } from './types';\nimport { defaults, getToken } from './utils';\n\nexport default (args?: HeaderTokenArgsI) => (config: AxiosRequestConfig) => {\n  const {\n    platDomain,\n    platDomainKey,\n    notSetPlatDomain,\n    authCookieKey,\n    authHeaderKey,\n    authScheme,\n    notSetAuthHeader,\n  } = defaults(args);\n\n  /**\n   * add params\n   */\n  const params =\n    /**\n     * 1. 要求不设置\n     * 2. platDomain 为空值\n     * 3. 请求中已经设置 [platDomainKey] 参数\n     * 时不再设置\n     */\n    notSetPlatDomain ||\n    !platDomain ||\n    (config.params && config.params[platDomainKey]) ||\n    config?.url?.indexOf(`${platDomainKey}=`) !== -1\n      ? config.params\n      : { ...config.params, [platDomainKey]: platDomain };\n\n  /**\n   * add headers\n   */\n  const token = getToken(authCookieKey, authScheme);\n\n  const headers =\n    /**\n     * 1. 要求不设置\n     * 2. cookie 中没有获取到 token\n     * 3. 请求中已设值相应请求头\n     * 时不再设置\n     */\n    notSetAuthHeader || !token || config?.headers?.[authHeaderKey]\n      ? config.headers\n      : { ...config.headers, [authHeaderKey]: token };\n\n  return { ...config, params, headers };\n};\n","import axios from './axios';\nimport { HeaderTokenArgsI } from './types';\n\nexport default (args?: HeaderTokenArgsI) => {\n  const NAME = 'tokenInterceptor';\n\n  if (!window.angular) return NAME;\n\n  window.angular\n    .module(NAME, [])\n    .factory(NAME, () => ({\n      request(config: any) {\n        if (config.url.indexOf('.tpl') !== -1) {\n          // eslint-disable-next-line no-param-reassign\n          config.withCredentials = false;\n        }\n\n        // 避免修改 templateCache 中的 url\n        if (config.url.indexOf('.html') === -1) return axios(args)(config);\n\n        return config;\n      },\n    }))\n    .config([\n      '$httpProvider',\n      function config($httpProvider: any) {\n        $httpProvider.interceptors.push(NAME);\n      },\n    ]);\n\n  return NAME;\n};\n","import { getToken } from './utils';\n\n/**\n * 为 url 附加登录授权 token 参数\n */\nexport default (\n  url: string,\n  paramKey: string = '__auth__',\n  authCookieKey: string = 'Auth'\n): string => {\n  const token = getToken(authCookieKey, '');\n\n  if (token) {\n    return `${url}${url.indexOf('?') !== -1 ? '&' : '?'}${paramKey}=${token}`;\n  }\n\n  return url;\n};\n","import axios, { AxiosRequestConfig } from 'axios';\nimport qs from 'qs';\nimport { HeaderTokenArgsI } from '../interceptor/token/types';\nimport { axiosTokenInterceptor } from '../interceptor/token';\n\nconst instance = axios.create({\n  withCredentials: true,\n  paramsSerializer(params) {\n    return qs.stringify(params, { arrayFormat: 'repeat', allowDots: true });\n  },\n});\n\nlet tokenInterceptor = instance.interceptors.request.use(axiosTokenInterceptor());\n\n/**\n * 更新 auth-sdk 自身请求的 token 拦截器设置\n */\nexport const updateSelfTokenInterceptor = (args?: HeaderTokenArgsI) => {\n  instance.interceptors.request.eject(tokenInterceptor);\n  tokenInterceptor = instance.interceptors.request.use(axiosTokenInterceptor(args));\n};\n\nconst request = (url: string, config?: AxiosRequestConfig) =>\n  instance({\n    url,\n    ...config,\n  });\n\nexport default request;\n","interface ResultI {\n  href: string;\n  origin: string;\n  protocol: string;\n  host: string;\n  hostname: string;\n  port: string;\n  pathname: string;\n  search: string;\n  hash: string;\n}\n\nfunction parseUrl(url?: string) {\n  if (!url) return {} as ResultI;\n\n  const _url = url.startsWith('//') ? `${window.location.protocol}${url}` : url;\n\n  const result = {};\n  const keys = [\n    'href',\n    'origin',\n    'protocol',\n    'host',\n    'hostname',\n    'port',\n    'pathname',\n    'search',\n    'hash',\n  ];\n  const regexp = /(([^:]+:)\\/\\/(([^:/?#]+)(:\\d+)?))(\\/[^?#]*)?(\\?[^#]*)?(#.*)?/;\n\n  const match = regexp.exec(_url);\n\n  if (match) {\n    for (let i = keys.length - 1; i >= 0; --i) {\n      result[keys[i]] = match[i] ? match[i] : '';\n    }\n  }\n\n  return result as ResultI;\n}\n\nexport default parseUrl;\n","import parseUrl from '../utils/parseUrl';\n\nexport const ME_URL = (origin: string = window.location.origin) =>\n  `${origin}/gateway/v1/user?requireAvatar=true`;\n\nexport const LOGIN_URL = (origin: string = window.location.origin) => `${origin}/gateway/v1/login`;\n\nexport const OP_GET_URL = (origin: string = window.location.origin) => {\n  const { host } = parseUrl(origin);\n  return `${origin}/gateway/v1/op?host=${encodeURIComponent(host)}`;\n};\n\nexport const AUTHORIZE_URL = (opBaseUrl: string) => `${opBaseUrl}/oauth/authorize`;\n\nexport const PLAT_INFO_URL = (djcGatewayBaseUrl: string) =>\n  `${djcGatewayBaseUrl}/djcsupport/domainname/getPlatformConfigure`;\n","import request from '../../utils/request';\nimport { LOGIN_URL, PLAT_INFO_URL } from '../../constants/url';\nimport parseUrl from '../../utils/parseUrl';\nimport OrgIdentityType from '../../enums/OrgIdentityType';\n\n/**\n * 登录目标域应用id\n * 如果传递了平台id和部署点约定使用户 ${platId}@${dp} 作为 clientId\n */\nconst getClientId = (platId: string, dp?: string, clientId?: string) => {\n  if (clientId) {\n    return clientId;\n  }\n  if (dp) {\n    return `${platId}@${dp}`;\n  }\n  return `plat@${platId}`;\n};\n\n/**\n * 登录成功跳转地址\n */\nconst getLoginSuccessRedirectUrl = (origin?: string, loginSuccessRedirectUri?: string) => {\n  if (loginSuccessRedirectUri) return loginSuccessRedirectUri;\n  return `${origin || window.location.origin}/login-app/login-success/index.html`;\n};\n\nexport interface BuildLoginParamsArgs {\n  /**\n   * 查询平台信息网关\n   */\n  djcGatewayBaseUrl: string;\n\n  /**\n   * 登录目标域\n   */\n  origin?: string;\n\n  /**\n   * who am i, 默认为 origin -> host\n   */\n  whoAmIHost?: string;\n  // typo, 为了兼容而保留\n  whoAmIhost?: string;\n\n  /**\n   * 平台id, 仅限内网使用\n   */\n  platId?: string;\n\n  /**\n   * 部署点, 仅限内网使用\n   */\n  dp?: string;\n\n  /**\n   * 授权页面UI\n   */\n  ui?: string;\n\n  /**\n   * 跳转到注册页面是否传递 noHeader 参数\n   * @default false\n   */\n  registerNoHeader?: boolean;\n\n  /**\n   * 页面title\n   */\n  title?: string;\n\n  /**\n   * 登录目标域应用id\n   */\n  clientId?: string;\n\n  /**\n   * 登录成功跳转地址\n   */\n  loginSuccessRedirectUri?: string;\n\n  /**\n   * 限制登录用户的身份类型\n   */\n  limitOrgTypes?: Array<OrgIdentityType>;\n\n  /**\n   * 错误信息\n   */\n  errorMessage?: string;\n\n  /**\n   * 额外的参数\n   */\n  extraParams?: object;\n}\n\nconst buildLoginParams = async ({\n  origin = window.location.origin,\n  whoAmIHost,\n  // typo, 为了兼容而保留\n  whoAmIhost,\n  djcGatewayBaseUrl,\n  platId,\n  dp,\n  ui,\n  registerNoHeader,\n  title,\n  clientId,\n  loginSuccessRedirectUri,\n  limitOrgTypes,\n  errorMessage,\n  extraParams,\n}: BuildLoginParamsArgs) => {\n  const originHost = parseUrl(origin).host;\n\n  let _platId = platId;\n\n  // 如果传递了 platId 不查询平台信息\n  if (!platId) {\n    const { data: platInfo } = await request(PLAT_INFO_URL(djcGatewayBaseUrl), {\n      params: {\n        orgDomainName: originHost,\n      },\n    });\n\n    _platId = platInfo?.platformCode;\n  }\n\n  if (!_platId) {\n    const error = `未查询到 ${originHost} 对应的平台信息, 请检查平台配置是否正确`;\n\n    // eslint-disable-next-line no-console\n    console.log(error);\n\n    return Promise.reject(new Error(error));\n  }\n\n  return {\n    ...extraParams,\n    ui,\n    register_no_header: registerNoHeader,\n    title,\n    origin,\n    client_id: getClientId(_platId, dp, clientId),\n    // typo whoAmIhost, 为了兼容而保留\n    scope: whoAmIHost || whoAmIhost || originHost,\n    login_sucess_redirect_uri: getLoginSuccessRedirectUrl(origin, loginSuccessRedirectUri),\n    redirect_uri: LOGIN_URL(origin),\n    is_fpa: true,\n    error_message: errorMessage,\n    options: limitOrgTypes && {\n      limitOrgTypes,\n    },\n  };\n};\n\nexport default buildLoginParams;\n","import request from '../../utils/request';\nimport { AUTHORIZE_URL } from '../../constants/url';\n\nconst authorize = async (opBaseUrl: string, params: object) => {\n  const response = await request(AUTHORIZE_URL(opBaseUrl), {\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/x-www-form-urlencoded',\n    },\n    params,\n  });\n\n  return response?.data || {};\n};\n\nexport default authorize;\n","/* eslint-disable no-restricted-globals */\n/**\n * 顶层窗口引用挂载节点\n */\nexport const getTopRoot = () => {\n  // try 防止跨域报错\n  try {\n    return (top?.document.querySelector('#mount-root') as HTMLElement) || top.document.body;\n  } catch (error) {\n    return document.body;\n  }\n};\n\nexport function getParent(triggerNode?: Element): HTMLElement {\n  if (triggerNode && triggerNode.parentNode) {\n    // @ts-ignore\n    return triggerNode.parentNode;\n  }\n  // fallback\n  return getTopRoot();\n}\n","/* eslint-disable no-restricted-globals */\nimport React, { useState, useEffect } from 'react';\nimport { createGlobalStyle } from 'styled-components';\n\n/**\n * 用于标记是否需要注入css\n * 避免多次注入(弹出多个drawer的时), css不能被正确清理\n * 导致body滚动条被一直禁用\n */\nexport const TOP_BODY_OVERFLOW_HIDDEN_MARK = 'gmsoft-ui-top-body-need-inject-css';\n\nexport const setBodyOverflowHidden = (val: boolean) => {\n  top[TOP_BODY_OVERFLOW_HIDDEN_MARK] = val;\n};\n\nexport const getBodyOverflowHidden = () => {\n  if (top[TOP_BODY_OVERFLOW_HIDDEN_MARK] === undefined) {\n    setBodyOverflowHidden(true);\n  }\n  return top[TOP_BODY_OVERFLOW_HIDDEN_MARK];\n};\n\nconst HiddenOverflow = createGlobalStyle`\n  body{\n    position: relative;\n    width: calc(100% - 17px);\n    overflow: hidden;\n    touch-action: none;\n  }\n`;\n\n/**\n * 标记 禁用top.body 滚动\n * didMount setBodyOverflowHidden(false)\n * willUnmount setBodyOverflowHidden(true)\n */\nexport const useHiddenOverflow = () => {\n  useEffect(() => {\n    setBodyOverflowHidden(false);\n    return () => {\n      setBodyOverflowHidden(true);\n    };\n  });\n};\n\nexport default () => {\n  const [visibleProxy] = useState(() => getBodyOverflowHidden());\n  useHiddenOverflow();\n  if (visibleProxy) {\n    return <HiddenOverflow />;\n  }\n  return null;\n};\n","/* eslint-disable no-restricted-globals */\nimport React, { ReactNode } from 'react';\nimport { Modal as AntdModal, ConfigProvider } from 'antd';\nimport { ModalFuncProps, ModalProps as AntdModalProps } from 'antd/lib/modal';\nimport { StyleSheetManager } from 'styled-components';\nimport { getTopRoot, getParent } from '../utils/getContainer';\nimport TopBodyOverflow from '../components/TopBodyOverflow';\n\nconst topRoot = getTopRoot();\n\nexport interface ModalProps extends Omit<AntdModalProps, 'destroyOnClose'> {\n  children?: ReactNode;\n}\n\nconst Modal = ({ children, width, getContainer, ...rest }: ModalProps) => {\n  if (rest.visible !== true) {\n    return null;\n  }\n  return (\n    <StyleSheetManager target={topRoot}>\n      <>\n        <TopBodyOverflow />\n        <AntdModal getContainer={getContainer || getTopRoot} width={width} {...rest}>\n          <ConfigProvider getPopupContainer={getParent}>{children}</ConfigProvider>\n        </AntdModal>\n      </>\n    </StyleSheetManager>\n  );\n};\n\ntype ModalType = 'info' | 'success' | 'error' | 'warning' | 'confirm';\n\nconst createModal = (type: ModalType) => (config: ModalFuncProps) =>\n  AntdModal[type]({ getContainer: getTopRoot, ...config });\n\nModal.info = createModal('info');\nModal.success = createModal('success');\nModal.error = createModal('error');\nModal.warning = createModal('warning');\nModal.confirm = createModal('confirm');\nModal.destroyAll = AntdModal.destroyAll;\n\nexport default Modal;\n","export const ANTD_PREFIX = 'ant';\n","import React, { MutableRefObject } from 'react';\nimport ReactDOM from 'react-dom';\nimport styled from 'styled-components';\nimport Modal from '../../components/Modal';\nimport { ANTD_PREFIX } from '../../constants/antdPrefix';\n\nlet cancelLogin: () => void = () => undefined;\n\nconst LoginBoxModal = styled(Modal)`\n  &&& .${ANTD_PREFIX}-modal-body {\n    border: 3px solid #666666;\n    border-radius: 3px;\n    padding: 0;\n  }\n`;\n\nconst popupLoginBox = (\n  loginFormUrl: string,\n  onCancelLogin?: () => void,\n  closePopupRef?: MutableRefObject<Function>\n) => {\n  if (cancelLogin) cancelLogin();\n\n  const div = document.createElement('div');\n  document.body.appendChild(div);\n\n  const close = () => ReactDOM.unmountComponentAtNode(div);\n\n  cancelLogin = () => {\n    if (onCancelLogin && typeof onCancelLogin === 'function') {\n      onCancelLogin();\n    }\n    close();\n  };\n\n  ReactDOM.render(\n    <LoginBoxModal\n      visible\n      maskClosable\n      closable={false}\n      footer={null}\n      closeIcon={null}\n      onCancel={cancelLogin}\n      width={366}\n    >\n      <iframe\n        title=\"loginBox\"\n        className=\"login-form-box\"\n        src={loginFormUrl}\n        width=\"360px\"\n        height=\"440px\"\n        scrolling=\"no\"\n        style={{ margin: 0, padding: 0, display: 'block' }}\n        frameBorder=\"0\"\n      />\n    </LoginBoxModal>,\n    div\n  );\n\n  // eslint-disable-next-line no-param-reassign\n  if (closePopupRef) closePopupRef.current = close;\n\n  return close;\n};\n\nexport default popupLoginBox;\n","import { AnyAction, Dispatch } from 'redux';\nimport { CompatibleMeI } from '../types/Me';\n\nconst SET_GLOBAL_CONTEXT = '@@GLOBAL_CONTEXT/SET';\n\nfunction setGlobalContextMe(dispatch?: Dispatch<AnyAction>, me?: CompatibleMeI) {\n  if (dispatch) {\n    dispatch({\n      type: SET_GLOBAL_CONTEXT,\n      payload: { me },\n    });\n  }\n}\n\nexport default setGlobalContextMe;\n","export const WHO_AM_I_HOST_KEY = '__platDomain__';\n","import RoleType from '../../enums/RoleType';\n\nexport default (roles?: Array<RoleType>) => {\n  if (!roles) return false;\n  return roles.findIndex(role => String(role).endsWith('01')) !== -1;\n};\n","import getIsAdmin from './getIsAdmin';\nimport { CompatibleMeI, MeI } from '../../types/Me';\n\ninterface CompatibilityMeI {\n  (me?: MeI): CompatibleMeI | undefined;\n}\n\nconst compatibilityMe: CompatibilityMeI = me => {\n  if (!me || Object.getOwnPropertyNames(me).length === 0) return undefined;\n  return {\n    admin: getIsAdmin(me?.roles),\n    adminAreaId: me?.org?.areaId,\n    adminAreaName: me?.org?.areaName,\n    maintainPlatId: me?.additionalInformation?.mpi,\n    orgId: me?.org?.orgId,\n    orgName: me?.org?.orgName,\n    orgType: me?.org?.orgType,\n    userName: me?.realName,\n    userTypes: me?.roles ? me?.roles.join(',') : undefined,\n    deptRole: me?.additionalInformation?.deptRole,\n    isBidDown: me?.additionalInformation?.isBidDown,\n    isSj: me?.additionalInformation?.isSj,\n    orgClassNo: me?.additionalInformation?.orgClassNo,\n    organClass: me?.additionalInformation?.organClass,\n    userType: me?.additionalInformation?.userType,\n    ...me,\n  };\n};\nexport default compatibilityMe;\n","import { AnyAction, Dispatch } from 'redux';\nimport setGlobalContextMe from './setGlobalContextMe';\nimport { ME_URL } from '../constants/url';\nimport { WHO_AM_I_HOST_KEY } from '../constants/whoAmIHostKey';\nimport request from '../utils/request';\nimport compatibilityMe from '../utils/compatibilityMe';\nimport parseUrl from '../utils/parseUrl';\nimport { CompatibleMeI } from '../types/Me';\n\nexport interface RequestMeArgsI {\n  /**\n   * 用于设置全局状态\n   */\n  dispatch: Dispatch<AnyAction>;\n\n  /**\n   * 登录目标域\n   */\n  origin?: string;\n\n  /**\n   * who am i, 默认为 origin -> host\n   */\n  whoAmIHost?: string;\n}\n\nexport default async ({\n  origin = window.location.origin,\n  whoAmIHost,\n  dispatch,\n}: RequestMeArgsI) => {\n  const originHost = parseUrl(origin).host;\n  const _whoAmIhost = whoAmIHost || originHost;\n\n  const response = await request(ME_URL(origin), {\n    params: {\n      [WHO_AM_I_HOST_KEY]: _whoAmIhost,\n    },\n  });\n\n  const me = response.data;\n\n  if (!me || Object.getOwnPropertyNames(me).length === 0) return Promise.reject();\n\n  const cMe = compatibilityMe(response.data);\n\n  /**\n   * platDomain/gateway/user 始终返回此平台的用户信息, whoAmIHost 只作为鉴权使用\n   * 如果 origin 与当前访问域名不同, 不写入全局状态\n   * 即只存放'自己'平台的登录信息\n   */\n  if (window.location.origin.includes(origin)) setGlobalContextMe(dispatch, cMe);\n\n  return cMe as CompatibleMeI;\n};\n","import { OP_GET_URL } from '../constants/url';\nimport request from '../utils/request';\n\nexport default async (origin: string = window.location.origin, djcGatewayBaseUrl: string) => {\n  if (import.meta.env.VITE_DEPLOY === 'PM') {\n    return `${djcGatewayBaseUrl}/authing`;\n  }\n\n  const response = await request(OP_GET_URL(origin));\n\n  return response?.data?.op;\n};\n","import { MutableRefObject } from 'react';\nimport { AxiosError } from 'axios';\nimport buildLoginParams from './buildLoginParams';\nimport { LoginCommonArgs } from './types';\nimport authorize from './authorize';\nimport popupLoginBox from './popupLoginBox';\nimport requestMe from '../requestMe';\nimport requestOpBaseUrl from '../requestOpBaseUrl';\n\nexport interface LoginByPopupArgs extends LoginCommonArgs {\n  /**\n   * 取消登录事件处理\n   */\n  onCancelLogin?: () => void;\n\n  /**\n   * 关闭登录弹层, 由于登录之后需要重定向到登录成功页面, 所以关闭动作只有由引用来调用\n   */\n  closePopupRef?: MutableRefObject<Function>;\n}\n\nexport default async ({\n  origin = window.location.origin,\n  whoAmIHost,\n  // typo, 为了兼容而保留\n  whoAmIhost,\n  clientId,\n  platId,\n  dp,\n  ui,\n  registerNoHeader,\n  title,\n  djcGatewayBaseUrl,\n  loginSuccessRedirectUri,\n  limitOrgTypes,\n  oauthState,\n  onCancelLogin,\n  closePopupRef,\n  dispatch,\n}: LoginByPopupArgs) => {\n  const _whoAmIhost = whoAmIHost || whoAmIhost;\n\n  try {\n    const me = await requestMe({ dispatch, origin, whoAmIHost: _whoAmIhost });\n    return me;\n  } catch (e) {\n    const params = await buildLoginParams({\n      origin,\n      whoAmIHost: _whoAmIhost,\n      djcGatewayBaseUrl,\n      clientId,\n      platId,\n      dp,\n      ui,\n      registerNoHeader,\n      title,\n      loginSuccessRedirectUri,\n      limitOrgTypes,\n      extraParams: oauthState,\n    });\n\n    const opBaseUrl = await requestOpBaseUrl(origin, djcGatewayBaseUrl);\n\n    try {\n      const { location, res } = await authorize(opBaseUrl, {\n        response_type: 'code',\n        client_id: params.client_id,\n        redirect_uri: params.redirect_uri,\n        scope: params.scope,\n        options: params.options,\n        state: JSON.stringify(params),\n      });\n\n      if (res === 0) {\n        const me = await requestMe({ dispatch, origin, whoAmIHost: _whoAmIhost }).catch(() => {\n          // eslint-disable-next-line no-console\n          console.error('服务器错误, 登录成功, 但获取登录用户信息失败!');\n        });\n        return me;\n      }\n\n      if (location) return popupLoginBox(location, onCancelLogin, closePopupRef);\n      // eslint-disable-next-line no-console\n      console.log('login error, mode=popup, authorize not response location');\n    } catch (error) {\n      const _error = error as AxiosError;\n\n      const message =\n        _error?.response?.data?.error_message ||\n        _error?.response?.data?.message ||\n        _error.message ||\n        '服务器端错误';\n\n      // eslint-disable-next-line no-console\n      console.error(message, error);\n    }\n  }\n};\n","/**\n * promise reject 时, 仍然使用 resolve 返回, 可用于 [promise.all] 当某一 promise reject 时, 继续等待其他的 promise 执行完成\n * @param promise\n * @returns {*}\n */\nexport default promise =>\n  promise.then(value => ({ value, status: 'resolved' }), error => ({ error, status: 'rejected' }));\n","export default (src: string, timeout: number = 5000) =>\n  new Promise((resolve, reject) => {\n    const loader = new Image(0, 0);\n    loader.onload = resolve;\n    loader.onerror = reject;\n    loader.src = src;\n\n    setTimeout(() => {\n      reject();\n    }, timeout);\n  });\n","import request from '../../utils/request';\nimport reflect from '../../utils/promise-reflect';\nimport requestByImage from '../../utils/requestByImage';\n\nconst mapUrls = (urls: Array<string> = []) => {\n  const promises = urls.filter(url => url).map((url: string) => requestByImage(url));\n  // 等待所有注销调用完成\n  return Promise.all(promises.map(reflect));\n};\n\n/**\n * 登录注销\n */\nconst doLogout = async (\n  opBaseUrl: string,\n  /**\n   * 注销后的跳转地址\n   */\n  logoutRedirectUrl: string,\n  /**\n   * 注销其他的第三方单点登录, 例如政采云\n   */\n  otherLogoutUrls?: Array<string>\n) => {\n  const { data } = await request(`${opBaseUrl}/logout`, {\n    method: 'DELETE',\n    params: {\n      success_uri: logoutRedirectUrl,\n    },\n  });\n\n  /**\n   * 注销其他的第三方单点登录, 例如政采云\n   */\n  if (otherLogoutUrls && otherLogoutUrls.length > 0) {\n    await mapUrls(otherLogoutUrls);\n  }\n\n  window.open(data.location, '_top');\n};\n\nexport default doLogout;\n","import requestOpBaseUrl from '../requestOpBaseUrl';\nimport doLogout from './doLogout';\n\nexport interface LogoutArgs {\n  /**\n   * 大家采网关地址\n   * 用于获取平台信息\n   */\n  djcGatewayBaseUrl: string;\n  /**\n   * 注销后的跳转地址\n   */\n  logoutRedirectUrl: string;\n  /**\n   * 注销其他的第三方单点登录, 例如政采云\n   */\n  otherLogoutUrls?: Array<string>;\n  /**\n   * 目标域, 默认为当前请求域\n   */\n  origin?: string;\n}\n\nexport default async ({\n  djcGatewayBaseUrl,\n  logoutRedirectUrl,\n  otherLogoutUrls,\n  origin,\n}: LogoutArgs) => {\n  const opBaseUrl = await requestOpBaseUrl(origin, djcGatewayBaseUrl);\n\n  await doLogout(opBaseUrl, logoutRedirectUrl, otherLogoutUrls);\n};\n","import qs from 'qs';\nimport UIType from '../enums/UIType';\nimport request from '../utils/request';\nimport { PLAT_INFO_URL } from '../constants/url';\nimport parseUrl from '../utils/parseUrl';\n\nexport interface RegisterArgs {\n  /**\n   * 授权页面 origin, 注册也部署在此域下\n   */\n  authPageOrigin: string;\n  /**\n   * 大家采网关地址\n   * 用于获取平台信息\n   */\n  djcGatewayBaseUrl: string;\n  /**\n   * 默认使用当前访问域名去查询对应的平台信息, 可以通过此参数指定域名\n   * 例如 https://www.gec123.com\n   */\n  origin?: string;\n  /**\n   * 如果指定了ui, 则使用该值, 否则从 origin 和 dp 推断 ui\n   */\n  ui?: UIType;\n  /**\n   * 是否隐藏页头\n   * @default false\n   */\n  noHeader?: boolean;\n  /**\n   * @部署点 例如: PM\n   */\n  dp?: string;\n}\n\nexport default async ({\n  authPageOrigin,\n  origin,\n  ui,\n  dp,\n  djcGatewayBaseUrl,\n  noHeader,\n}: RegisterArgs) => {\n  // 注销, 然后跳转到登录页面\n  const registerUrl = `${authPageOrigin}/register/select-type`;\n\n  let platId: string | null = null;\n\n  const { data: platInfo } = await request(PLAT_INFO_URL(djcGatewayBaseUrl), {\n    params: {\n      orgDomainName: origin ? parseUrl(origin).host : window.location.host,\n    },\n  });\n\n  platId = platInfo?.platformCode;\n\n  window.open(\n    `${registerUrl}${qs.stringify(\n      {\n        ui,\n        platId,\n        dp,\n        noHeader,\n      },\n      { addQueryPrefix: true, encode: false }\n    )}`,\n    '_blank'\n  );\n};\n","import qs from 'qs';\nimport buildLoginParams, { BuildLoginParamsArgs } from './buildLoginParams';\n\nexport default async (args: BuildLoginParamsArgs) => {\n  const params = await buildLoginParams(args);\n  return qs.stringify(params, { addQueryPrefix: true });\n};\n","export const GLOBAL_CONTEXT = 'globalContext';\n","import { GLOBAL_CONTEXT } from '../constants/namespace';\nimport { GlobalContextStateI } from '../types/GlobalContextState';\n\nexport default (state: GlobalContextStateI) => state[GLOBAL_CONTEXT].me;\n","import requestMe, { RequestMeArgsI } from './requestMe';\n\nexport interface RequestMeTrySSOArgsI extends RequestMeArgsI {\n  // typo, 为了兼容而保留\n  whoAmIhost?: string;\n}\n\n/**\n * @deprecated\n * 不再需要客户端尝试单点登录, 建议使用 requestMe 代替,\n * 参数拼写错误修正: whoAmIhost -> whoAmIHost\n */\nconst requestMeTrySSO = ({\n  origin = window.location.origin,\n  whoAmIHost,\n  // typo, 为了兼容而保留\n  whoAmIhost,\n  dispatch,\n}: RequestMeTrySSOArgsI) => requestMe({ dispatch, origin, whoAmIHost: whoAmIHost || whoAmIhost });\n\nexport default requestMeTrySSO;\n","import { requestMeTrySSO } from '..';\nimport { RequestMeTrySSOArgsI } from '../requestMeTrySSO';\n\nexport interface LoginByPageArgs extends RequestMeTrySSOArgsI {\n  /**\n   * 登录页面地址\n   */\n  loginPage: string;\n}\n\nexport default async ({ loginPage, ...requestMeArgs }: LoginByPageArgs) => {\n  try {\n    /**\n     * 先尝试获取当前用户\n     */\n    const me = await requestMeTrySSO(requestMeArgs);\n    return me;\n  } catch (e) {\n    window.open(loginPage, '_top');\n  }\n};\n","import React from 'react';\nimport { LoginOrRegisterProps } from './LoginOrRegister';\n\n/**\n * 配置环境\n */\nexport default React.createContext<Omit<LoginOrRegisterProps, 'children'>>({\n  authPageOrigin: '',\n  djcGatewayBaseUrl: '',\n  toCenterPage: () => undefined,\n});\n","export default \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDkiIHZpZXdCb3g9IjAgMCA0OCA0OSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTQ4IDI0LjAyNjRDNDggMzcuMjY3MyAzNy4yNTQxIDQ4LjAwMzEgMjMuOTk3NSA0OC4wMDMxQzEwLjc0MjEgNDguMDAzMSAwIDM3LjI2NzMgMCAyNC4wMjY0QzAgMTMuODYzIDYuMzI2MDUgNS4xNzk4NyAxNS4yNjAyIDEuNjkwMzNDMTcuOTU5NiAwLjYwMTM3NiAyMC45MDg3IDAgMjMuOTk4MSAwQzI3LjA5MTMgMCAzMC4wMzc5IDAuNjAwNzY5IDMyLjczOTggMS42OTAzM0M0MS42NzM0IDUuMTc5ODcgNDggMTMuODYzIDQ4IDI0LjAyNjRaTTE0Ljc3MzMgMTguOTY5OUMxNC43NzMzIDIzLjAxMDUgMTYuODQzNiAyNi41MDg4IDE5Ljg1MzEgMjguMjIxMUMyMS4xMDEyIDI4LjkzMTQgMjIuNTA2NSAyOS4zNDA5IDIzLjk5NzUgMjkuMzQwOUMyNS40MzYxIDI5LjM0MDkgMjYuNzkyNSAyOC45NTc4IDI4LjAwNzkgMjguMjk2QzMxLjA4ODUgMjYuNjE2MyAzMy4yMjU1IDIzLjA3NTMgMzMuMjI1NSAxOC45NzA1QzMzLjIyNTUgMTMuMjU1MyAyOS4wODY4IDguNjAzMjggMjMuOTk3NSA4LjYwMzI4QzE4LjkxMTQgOC42MDI2NyAxNC43NzMzIDEzLjI1NDcgMTQuNzczMyAxOC45Njk5Wk0yNC4wOTUgNDYuNDQ5NEMzMS4xMDY3IDQ2LjQ0OTQgMzcuMzYxNiA0My4yMjQ3IDQxLjQ2MTMgMzguMTc4M0M0MC45NzcgMzQuMTk3NSAzNy4wOTggMzAuODA4NiAzMS42MDgxIDI5LjExODJDMjkuNTM0NyAzMC45ODM1IDI2Ljg4NTYgMzIuMTA1OCAyMy45OTY4IDMyLjEwNThDMjEuMDQzOSAzMi4xMDU4IDE4LjM0MDggMzAuOTIzMSAxNi4yNDcyIDI4Ljk3NjdDMTAuOTA2OSAzMC41MDA5IDYuOTk1MzIgMzMuNjA5OSA2LjA3ODE4IDM3LjMzNTNDMTAuMTQ2NCA0Mi44NjE3IDE2LjcwMzMgNDYuNDQ5NCAyNC4wOTUgNDYuNDQ5NFoiIGZpbGw9IiNDRUNGRTAiLz4KPC9zdmc+Cg==\"","import { Avatar } from 'antd';\nimport React, { useMemo, useContext } from 'react';\nimport defaultAvatar from '../../imgs/defaultAvatar.svg';\nimport LoginOrRegisterContext from '../LoginOrRegisterContext';\n\ninterface Props {\n  path?: string;\n  className?: string;\n}\n\nexport default ({ path, className }: Props) => {\n  const { djcGatewayBaseUrl } = useContext(LoginOrRegisterContext);\n\n  const src = useMemo(() => {\n    // return 'https://lh3.googleusercontent.com/ogw/ADGmqu9g6TEN3h27tpp82Ie88Pk4W9SoLs2CRauXbDvMYQ=s32-c-mo'\n\n    if (path)\n      // eslint-disable-next-line max-len\n      return `${djcGatewayBaseUrl}/files?business=avatar&filePath=${path}&fileName=file&attachment=false&contentType=image/png`;\n    return defaultAvatar;\n  }, [djcGatewayBaseUrl, path]);\n\n  return <Avatar className={className} src={src} />;\n};\n","/* eslint-disable max-len */\nimport React, { useCallback, useContext } from 'react';\nimport styled from 'styled-components';\nimport logout from '../../function/logout';\nimport LoginOrRegisterContext from '../LoginOrRegisterContext';\n\nconst color = (props: any) => props.theme.textColorSecondary || '#697b8c';\nconst linkColorHover = (props: any) => props.theme.linkColorHover || '#1890ff';\n\nconst Logout = styled.a`\n  color: ${color};\n  &:active {\n    color: ${color};\n  }\n  span,\n  svg {\n    vertical-align: middle;\n    color: ${color};\n    fill: ${color};\n  }\n  &:hover {\n    span,\n    svg {\n      color: ${linkColorHover};\n      fill: ${linkColorHover};\n    }\n  }\n`;\n\nconst getCurrentUrl = () => {\n  try {\n    return window.top.location.href;\n  } catch (e) {\n    return window.location.href;\n  }\n};\n\nexport default () => {\n  const { logoutRedirectUrl, ...args } = useContext(LoginOrRegisterContext);\n\n  const logoutHandler = useCallback(async () => {\n    await logout({ ...args, logoutRedirectUrl: logoutRedirectUrl || getCurrentUrl() });\n  }, [args, logoutRedirectUrl]);\n\n  return (\n    <Logout onClick={logoutHandler}>\n      <span>退出</span>\n      <svg\n        viewBox=\"0 0 1024 1024\"\n        version=\"1.1\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        p-id=\"4393\"\n        width=\"20\"\n        height=\"20\"\n      >\n        <path\n          d=\"M593.92 838.513v-95.355a40.96 40.96 0 1 1 81.92 0v95.355c0 45.26-35.226 83.087-80.22 83.087H203.1c-44.994 0-80.22-37.827-80.22-83.087V185.487c0-45.26 35.226-83.087 80.22-83.087h392.52c44.994 0 80.22 37.827 80.22 83.087v193.946a40.96 40.96 0 1 1-81.92 0V185.487c0-1.024 0.061-1.147 0.901-1.167H203.9c0.84 0 0.901 0.164 0.901 1.167v653.026c0 1.024-0.061 1.147-0.901 1.167H594.82c-0.84 0-0.901-0.164-0.901-1.167z\"\n          p-id=\"4394\"\n        />\n        <path\n          d=\"M471.04 512h327.68q40.96 0 40.96 40.96t-40.96 40.96H471.04q-40.96 0-40.96-40.96T471.04 512z\"\n          p-id=\"4395\"\n        />\n        <path\n          d=\"M811.199 422.828L912.57 524.2q28.963 28.963 0 57.926t-57.926 0l-101.37-101.37q-28.964-28.964 0-57.927 28.962-28.963 57.925 0z\"\n          p-id=\"4396\"\n        />\n        <path\n          d=\"M753.273 625.575l101.37-101.37q28.964-28.964 57.927 0 28.963 28.962 0 57.925L811.2 683.501q-28.964 28.963-57.927 0t0-57.926z\"\n          p-id=\"4397\"\n        />\n      </svg>\n    </Logout>\n  );\n};\n","import React, { useContext } from 'react';\nimport { Menu, Typography } from 'antd';\nimport styled from 'styled-components';\nimport { MeI } from '../../types/Me';\nimport { ANTD_PREFIX } from '../../constants/antdPrefix';\nimport Avatar from './Avatar';\nimport Logout from './Logout';\nimport LoginOrRegisterContext from '../LoginOrRegisterContext';\n\nconst { Paragraph } = Typography;\n\nconst Wrap = styled.div`\n  &&& {\n    max-width: 280px;\n    margin-bottom: -6px;\n    .${ANTD_PREFIX}-menu-vertical {\n      border-right: none;\n      .${ANTD_PREFIX}-menu-item {\n        cursor: default;\n        line-height: 35px;\n        height: auto;\n        text-align: center;\n        margin: 0;\n        &.${ANTD_PREFIX}-menu-item-selected, &:active {\n          background-color: white;\n        }\n      }\n    }\n  }\n`;\n\nconst UserAvatar = styled(Avatar)`\n  &&& {\n    height: 64px;\n    width: 64px;\n    vertical-align: top;\n    border: 1px solid #dedede;\n  }\n`;\n\nconst P = styled(Paragraph).attrs({\n  ellipsis: true,\n})`\n  &&& {\n    margin: 0;\n  }\n`;\n\nconst Name = styled(P)`\n  font-size: 16px;\n  font-weight: 700;\n`;\n\ninterface Props {\n  me: MeI;\n}\n\nexport default ({ me }: Props) => {\n  const { toCenterPage } = useContext(LoginOrRegisterContext);\n  return (\n    <Wrap>\n      <Menu mode=\"vertical\">\n        <Menu.Item key=\"avatar\">\n          <UserAvatar path={me.additionalInformation?.avatar} />\n        </Menu.Item>\n        <Menu.Item key=\"name\">\n          {me.realName && (\n            <a onClick={toCenterPage}>\n              <Name>{me.realName}</Name>\n            </a>\n          )}\n          {me.org?.orgName && <P>{me.org?.orgName}</P>}\n        </Menu.Item>\n        <Menu.Divider />\n        <Menu.Item key=\"logout\">\n          <Logout />\n        </Menu.Item>\n      </Menu>\n    </Wrap>\n  );\n};\n","import React from 'react';\nimport { Popover, Typography } from 'antd';\nimport styled from 'styled-components';\nimport { MeI } from '../../types/Me';\nimport PopoverContent from './PopoverContent';\nimport Avatar from './Avatar';\n\nconst TopAvatar = styled(Avatar)`\n  &&& {\n    height: 24px;\n    width: 24px;\n    vertical-align: middle;\n    margin-right: 4px;\n  }\n`;\n\nconst { Text } = Typography;\n\nconst Name = styled(Text)`\n  &&& {\n    max-width: 150px;\n    vertical-align: middle;\n  }\n`;\n\ninterface Props {\n  me: MeI;\n}\n\nexport default ({ me }: Props) => (\n  <Popover placement=\"bottom\" autoAdjustOverflow={false} content={<PopoverContent me={me} />}>\n    <TopAvatar path={me.additionalInformation?.avatar} />\n    <Name ellipsis>{me.realName}</Name>\n  </Popover>\n);\n","import React, { useCallback, useContext } from 'react';\nimport register from '../function/register';\nimport LoginOrRegisterContext from './LoginOrRegisterContext';\n\nexport default () => {\n  const args = useContext(LoginOrRegisterContext);\n\n  const callRegister = useCallback(() => {\n    register(args);\n  }, [args]);\n\n  return (\n    <a className=\"register\" onClick={callRegister}>\n      注册\n    </a>\n  );\n};\n","import { useSelector } from 'react-redux';\nimport { meSelector } from '../function';\n\nexport default () => useSelector(meSelector);\n","import { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport useMe from '../../hooks/useMe';\nimport { requestMe } from '../../function';\n\nexport default () => {\n  const me = useMe();\n\n  const dispatch = useDispatch();\n\n  /**\n   * 如果在全局状态中没有, 尝试请求一次\n   */\n  useEffect(() => {\n    if (!me) {\n      requestMe({ dispatch }).catch(() => {});\n    }\n  }, [me, dispatch]);\n\n  return me;\n};\n","import { Typography } from 'antd';\nimport styled from 'styled-components';\n\nconst { Text } = Typography;\n\nexport default styled(Text).attrs({\n  type: 'secondary',\n})`\n  margin: 0 8px;\n`;\n","import React from 'react';\nimport { RegisterArgs } from '../function/register';\nimport LoginOrRegisterContext from './LoginOrRegisterContext';\nimport Me from './Me';\nimport Register from './Register';\nimport { CommonProps } from './CommonProps';\nimport { LogoutArgs } from '../function/logout';\nimport useTryGetMe from './hooks/useTryGetMe';\nimport Or from './Or';\n\nexport interface LoginOrRegisterProps\n  extends Omit<LogoutArgs, 'logoutRedirectUrl'>,\n    RegisterArgs,\n    CommonProps {\n  logoutRedirectUrl?: string;\n  children: React.ReactNode;\n}\n\nconst LoginOrRegister = (props: LoginOrRegisterProps) => {\n  const { className, children } = props;\n\n  const me = useTryGetMe();\n\n  return (\n    <LoginOrRegisterContext.Provider value={props}>\n      <div className={className}>\n        {me ? (\n          <Me me={me} />\n        ) : (\n          <>\n            {children}\n            <Or>或</Or>\n            <Register />\n          </>\n        )}\n      </div>\n    </LoginOrRegisterContext.Provider>\n  );\n};\n\nexport default LoginOrRegister;\n","import React from 'react';\n\ninterface Props {\n  login: () => void;\n}\n\nexport default ({ login }: Props) => (\n  <a className=\"login\" onClick={login}>\n    登录\n  </a>\n);\n","import React, { useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\nimport loginByPage, { LoginByPageArgs } from '../function/login/loginByPage';\nimport LoginOrRegister, { LoginOrRegisterProps } from './LoginOrRegister';\nimport Login from './Login';\n\nexport type Props = Omit<LoginByPageArgs, 'dispatch'> & Omit<LoginOrRegisterProps, 'children'>;\n\nexport default (props: Props) => {\n  const { loginPage } = props;\n\n  const dispatch = useDispatch();\n\n  const login = useCallback(() => {\n    loginByPage({ ...props, dispatch });\n  }, [dispatch, props]);\n\n  return (\n    <LoginOrRegister {...props} logoutRedirectUrl={loginPage}>\n      <Login login={login} />\n    </LoginOrRegister>\n  );\n};\n","import React, { useCallback } from 'react';\nimport { useDispatch } from 'react-redux';\nimport loginByPopup, { LoginByPopupArgs } from '../function/login/loginByPopup';\nimport LoginOrRegister, { LoginOrRegisterProps } from './LoginOrRegister';\nimport Login from './Login';\n\nexport type Props = Omit<LoginByPopupArgs, 'dispatch'> & Omit<LoginOrRegisterProps, 'children'>;\n\nexport default (props: Props) => {\n  const dispatch = useDispatch();\n\n  const login = useCallback(() => {\n    loginByPopup({ ...props, dispatch });\n  }, [dispatch, props]);\n\n  return (\n    <LoginOrRegister {...props}>\n      <Login login={login} />\n    </LoginOrRegister>\n  );\n};\n","enum OrgIdentityType {\n  PLATFORM = 1,\n  APPROVAL = 2,\n  STOCK = 3,\n  AGENT = 4,\n  PROVIDER = 5,\n  FINANCE = 7,\n  EMPLOYEE = 101,\n  EXPERT = 102,\n  TEACHER = 103,\n}\n\nexport default OrgIdentityType;\n\nexport const getOrgIdentityString = (type?: OrgIdentityType) => {\n  switch (type) {\n    case OrgIdentityType.PLATFORM:\n      return 'platform';\n    case OrgIdentityType.APPROVAL:\n      return 'approval';\n    case OrgIdentityType.STOCK:\n      return 'stock';\n    case OrgIdentityType.AGENT:\n      return 'agent';\n    case OrgIdentityType.PROVIDER:\n      return 'provider';\n    case OrgIdentityType.FINANCE:\n      return 'finance';\n    case OrgIdentityType.EMPLOYEE:\n      return 'employee';\n    case OrgIdentityType.EXPERT:\n      return 'expert';\n    case OrgIdentityType.TEACHER:\n      return 'teacher';\n    default:\n      return '';\n  }\n};\n\nexport const OrgIdentityTypeOptions = [\n  {\n    label: '平台运营',\n    value: OrgIdentityType.PLATFORM,\n  },\n  {\n    label: '主管单位',\n    value: OrgIdentityType.APPROVAL,\n  },\n  {\n    label: '采购单位',\n    value: OrgIdentityType.STOCK,\n  },\n  {\n    label: '采购代理机构',\n    value: OrgIdentityType.AGENT,\n  },\n  {\n    label: '供应商',\n    value: OrgIdentityType.PROVIDER,\n  },\n  {\n    label: '金融机构',\n    value: OrgIdentityType.FINANCE,\n  },\n  {\n    label: '单位成员',\n    value: OrgIdentityType.EMPLOYEE,\n  },\n  {\n    label: '专家',\n    value: OrgIdentityType.EXPERT,\n  },\n  {\n    label: '教师',\n    value: OrgIdentityType.TEACHER,\n  },\n];\n\nexport const OrgIdentityStringOptions = [\n  {\n    label: '平台运营',\n    value: getOrgIdentityString(OrgIdentityType.PLATFORM).toUpperCase(),\n  },\n  {\n    label: '主管单位',\n    value: getOrgIdentityString(OrgIdentityType.APPROVAL).toUpperCase(),\n  },\n  {\n    label: '采购单位',\n    value: getOrgIdentityString(OrgIdentityType.STOCK).toUpperCase(),\n  },\n  {\n    label: '采购代理机构',\n    value: getOrgIdentityString(OrgIdentityType.AGENT).toUpperCase(),\n  },\n  {\n    label: '供应商',\n    value: getOrgIdentityString(OrgIdentityType.PROVIDER).toUpperCase(),\n  },\n  {\n    label: '金融机构',\n    value: getOrgIdentityString(OrgIdentityType.FINANCE).toUpperCase(),\n  },\n  {\n    label: '单位成员',\n    value: getOrgIdentityString(OrgIdentityType.EMPLOYEE).toUpperCase(),\n  },\n  {\n    label: '专家',\n    value: getOrgIdentityString(OrgIdentityType.EXPERT).toUpperCase(),\n  },\n  {\n    label: '教师',\n    value: getOrgIdentityString(OrgIdentityType.TEACHER).toUpperCase(),\n  },\n];\n","enum RoleType {\n  /**\n   * 单位管理员\n   */\n  ORG_ADMIN = 101,\n\n  /**\n   * 负责人(物理)\n   */\n  ORG_CHIEF = 151,\n\n  /**\n   * 平台授权审核员\n   */\n  SYS_RIGHT = 102,\n\n  /**\n   * 平台坐席组长\n   */\n  SYS_DUTY_MONITOR = 104,\n\n  /**\n   * 平台坐席\n   */\n  SYS_DUTY = 105,\n\n  /**\n   * 平台一般管理员\n   */\n  SYS_COM_ADMIN = 107,\n\n  /**\n   * 公司网站管理员\n   * <p>www.gmsoft.com的管理员,发布内容等</p>\n   */\n  SYS_GMSOFT_ADMIN = 108,\n\n  /**\n   * 主管财政身份管理员\n   */\n  APPROVAL_ADMIN = 201,\n\n  /**\n   * 主管财政经办人\n   */\n  APPROVAL_OPER = 202,\n\n  /**\n   * 主管财政负责人\n   */\n  APPROVAL_LEADER = 203,\n\n  /**\n   * 采购单位管理员\n   */\n  STOCK_ADMIN = 301,\n\n  /**\n   * 采购经办人\n   */\n  STOCK_OPER = 302,\n\n  /**\n   * 采购负责人\n   */\n  STOCK_LEADER = 303,\n\n  /**\n   * 采购财务\n   */\n  STOCK_FIN = 304,\n\n  /**\n   * 代理机构管理员\n   */\n  AGENT_ADMIN = 401,\n\n  /**\n   * 代理业务经办人\n   */\n  AGENT_OPER = 402,\n  /**\n   * 代理业务负责人\n   */\n  AGENT_LEADER = 403,\n\n  /**\n   * 供应商身份管理员\n   */\n  PROVIDER_ADMIN = 501,\n\n  /**\n   * 供应商一般操作员\n   */\n  PROVIDER_OPER = 502,\n\n  /**\n   * 金融机构身份管理员\n   */\n  FINANC_ADMIN = 701,\n\n  /**\n   * 金融机构一般操作员\n   */\n  FINANC_OPER = 702,\n}\n\nexport default RoleType;\n","enum UserIdentity {\n  /**\n   * 单位用户\n   */\n  EMPLOYEE = 101,\n  /**\n   * 专家\n   */\n  EXPERT = 102,\n  /**\n   * 教师\n   */\n  TEACHER = 103,\n}\n\nexport default UserIdentity;\n","enum UIType {\n  /**\n   * 大家采\n   */\n  DJC = 'DJC',\n  /**\n   * 行采家\n   */\n  XCJ = 'XCJ',\n  /**\n   * 政府采购网\n   */\n  ZCJ = 'ZCJ',\n  /**\n   * 政采内网\n   */\n  PM = 'PM',\n  /**\n   * 证融通达\n   */\n  ZRTD = 'ZRTD',\n}\n\nexport default UIType;\n","const TOKEN_CACHE = '__token__';\nconst TOKEN_PARAMETER_KEY_CACHE = '__token_param_key__';\nconst DEFAULT_TOKEN_PARAMETER_KEY = '__token__';\n\n/**\n * 写缓存\n */\nexport const save = (tokenParamKey: string, token: string) => {\n  try {\n    if (tokenParamKey && token) {\n      /**\n       * 缓存 tokenParamKey, token 目的:\n       * 1. 前端路由时不用携带 token\n       * 2. 页面跳转时携带 token (for function getTokenCacheWithKey)\n       */\n      window[TOKEN_PARAMETER_KEY_CACHE] = tokenParamKey;\n      window[TOKEN_CACHE] = token;\n\n      /**\n       * 备用缓存方案, 尝试缓存到 history.state 中\n       * 避免页面刷新导致的丢失 token 的情况\n       */\n      window.history.replaceState(\n        {\n          ...window.history.state,\n          [TOKEN_PARAMETER_KEY_CACHE]: tokenParamKey,\n          [TOKEN_CACHE]: token,\n        },\n        ''\n      );\n    }\n  } catch {\n    // ignore cache failed\n  }\n};\n\n/**\n * 读取缓存的 tokenParamKey\n */\nexport const getTokenParamKey = () => {\n  try {\n    return (\n      window[TOKEN_PARAMETER_KEY_CACHE] ||\n      window.history.state[TOKEN_PARAMETER_KEY_CACHE] ||\n      DEFAULT_TOKEN_PARAMETER_KEY\n    );\n  } catch {\n    return DEFAULT_TOKEN_PARAMETER_KEY;\n  }\n};\n\n/**\n * 读取缓存的 token\n */\nexport const getToken = () => {\n  try {\n    return window[TOKEN_CACHE] || window.history.state[TOKEN_CACHE];\n  } catch {\n    return null;\n  }\n};\n","import qs from 'qs';\nimport * as cache from './cache';\n\n/**\n * 从 url 参数中获取 token\n * 并更新缓存\n *\n * @deprecated\n * 旧的(第三方cookies)解决方案, 从 url 中获取 token 并通过header 携带 token, 不再建议使用\n * 请使用 TokenInterceptor 代替\n */\nexport default (tokenParamKey?: string) => {\n  const query = qs.parse(window.location.search, { ignoreQueryPrefix: true }) || {};\n\n  const tpk = tokenParamKey || cache.getTokenParamKey();\n\n  /**\n   * 1. 从请求参数中获取 token\n   * 2. 如果参数中没有 token, 尝试从缓存中获取\n   */\n  const token = query[tpk] || cache.getToken();\n\n  cache.save(tpk, token);\n\n  return token;\n};\n","import * as cache from './cache';\n\n/**\n * 从缓存中读取 token\n * @returns - {tokenParamKey: token} | null\n *\n * @deprecated\n * 旧的(第三方cookies)解决方案, 从 url 中获取 token 并通过header 携带 token, 不再建议使用\n * 请使用 TokenInterceptor 代替\n */\nexport default () => {\n  const tpk = cache.getTokenParamKey();\n\n  const token = cache.getToken();\n\n  return token ? { [tpk]: token } : null;\n};\n","import getTokenLegacy from './getTokenLegacy';\n\n/**\n * just cache not return\n */\nexport default (tokenParamKey?: string) => {\n  getTokenLegacy(tokenParamKey);\n};\n","import qs, { IStringifyOptions } from 'qs';\nimport getTokenCacheWithKey from './getTokenCacheWithKey';\n\ninterface jumpWithTokenArgs {\n  /**\n   * 跳转地址\n   */\n  url: string;\n  /**\n   * 页面跳转目标窗口\n   * @default _self\n   */\n  target?: string;\n  /**\n   * 额外的需要拼接到 url 的参数\n   */\n  extraParams?: object;\n  /**\n   * qs stringify 选项\n   * @see https://www.npmjs.com/package/qs\n   */\n  qsStringifyOptions?: IStringifyOptions;\n}\n\n/**\n * 页面跳转时携带 token\n * 必须配合 headerToken 拦截器使用\n *\n * @deprecated\n * 旧的(第三方cookies)解决方案, 从 url 中获取 token 并通过header 携带 token, 不再建议使用\n * 请使用 TokenInterceptor 代替\n */\nexport default ({ url, target = '_self', extraParams, qsStringifyOptions }: jumpWithTokenArgs) => {\n  const tokenObject = getTokenCacheWithKey();\n\n  if (tokenObject) {\n    const [path, search] = url.split('?');\n\n    const newSearch = qs.stringify(\n      { ...qs.parse(search), ...extraParams, ...tokenObject },\n      { arrayFormat: 'repeat', allowDots: true, ...qsStringifyOptions }\n    );\n\n    const newUrl = [path, newSearch].join('?');\n\n    window.open(newUrl, target);\n  }\n};\n","import { AxiosRequestConfig } from 'axios';\nimport { getTokenLegacy } from '../../utils/tokenUtils';\nimport { HeaderTokenArgs } from './typing';\n\nexport const DEFAULT_AUTH_HEADER_KEY = 'Authorization';\n\n/**\n * 为了尽量减少对外部设定的依赖(主要是移动端 h5)\n * 例如 Android webview 需要设置支持第三方 cookies, 需要设置支持 localStorage\n * 避免使用以上的客户端存储方案\n * 通过 url 参数和 headers 传递用户 token\n */\nexport default (\n  { tokenParamKey, authHeaderKey }: HeaderTokenArgs,\n  config: AxiosRequestConfig = {}\n) => {\n  const token = getTokenLegacy(tokenParamKey);\n\n  if (token) {\n    // add token into headers\n    const headers = { ...config.headers, [authHeaderKey || DEFAULT_AUTH_HEADER_KEY]: token };\n\n    return { ...config, headers };\n  }\n\n  return config;\n};\n","import { AxiosRequestConfig } from 'axios';\nimport { cacheTokenAndParamKey } from '../../utils/tokenUtils';\nimport setHeaderToken from './setHeaderToken';\nimport { HeaderTokenArgs } from './typing';\n\n/**\n * @deprecated \n * 旧的(第三方cookies)解决方案, 从 url 中获取 token 并通过header 携带 token, 不再建议使用\n * 请使用 TokenInterceptor 代替\n */\nfunction HTInterceptor(args: HeaderTokenArgs) {\n  /**\n   * 初始化时先缓存一次 token 和 paramKey, 避免页面跳转时查询缓存失败\n   */\n  cacheTokenAndParamKey(args.tokenParamKey);\n\n  return (config: AxiosRequestConfig) => setHeaderToken(args, config);\n}\n\nexport default HTInterceptor;\n","import { cacheTokenAndParamKey } from 'src/utils/tokenUtils';\nimport setHeaderToken from './setHeaderToken';\nimport { HeaderTokenArgs } from './typing';\n\n/**\n * @deprecated\n * 旧的(第三方cookies)解决方案, 从 url 中获取 token 并通过header 携带 token, 不再建议使用\n * 请使用 TokenInterceptor 代替\n */\nfunction HTInterceptor(args: HeaderTokenArgs) {\n  /**\n   * 初始化时先缓存一次 token 和 paramKey, 避免页面跳转时查询缓存失败\n   */\n  cacheTokenAndParamKey(args.tokenParamKey);\n\n  window.angular\n    .module('HTInterceptor', [])\n    .factory('HTInterceptor', () => ({\n      request(config: any) {\n        return setHeaderToken(args, config);\n      },\n    }))\n    .config([\n      '$httpProvider',\n      function config($httpProvider: any) {\n        $httpProvider.interceptors.push('HTInterceptor');\n      },\n    ]);\n\n  return 'HTInterceptor';\n}\n\nexport default HTInterceptor;\n"],"names":["__assign","s","i","n","p","__rest","e","t","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","reject","fulfilled","step","rejected","result","__generator","body","_","f","y","g","verb","v","op","__makeTemplateObject","cooked","raw","getToken","authCookieKey","authScheme","cookies","cookieAuth","cookie","auth","defaults","_a","_b","_c","platDomain","_d","platDomainKey","_e","notSetPlatDomain","_f","_g","authHeaderKey","_h","_j","notSetAuthHeader","axiosTokenInterceptor","args","config","params","token","headers","angular","NAME","axios","$httpProvider","urlWithToken","url","paramKey","instance","qs","tokenInterceptor","updateSelfTokenInterceptor","request","parseUrl","_url","keys","regexp","match","ME_URL","origin","LOGIN_URL","AUTHORIZE_URL","opBaseUrl","PLAT_INFO_URL","djcGatewayBaseUrl","getClientId","platId","dp","clientId","getLoginSuccessRedirectUrl","loginSuccessRedirectUri","buildLoginParams","whoAmIHost","whoAmIhost","ui","registerNoHeader","title","limitOrgTypes","errorMessage","extraParams","originHost","_platId","platInfo","error","authorize","response","getTopRoot","getParent","triggerNode","TOP_BODY_OVERFLOW_HIDDEN_MARK","setBodyOverflowHidden","val","getBodyOverflowHidden","HiddenOverflow","createGlobalStyle","templateObject_1","useHiddenOverflow","useEffect","TopBodyOverflow","visibleProxy","useState","React","topRoot","Modal","children","width","getContainer","rest","StyleSheetManager","AntdModal","ConfigProvider","createModal","type","ANTD_PREFIX","cancelLogin","LoginBoxModal","styled","popupLoginBox","loginFormUrl","onCancelLogin","closePopupRef","div","close","ReactDOM","SET_GLOBAL_CONTEXT","setGlobalContextMe","dispatch","me","WHO_AM_I_HOST_KEY","getIsAdmin","roles","role","compatibilityMe","_k","_l","_m","requestMe","_whoAmIhost","cMe","requestOpBaseUrl","loginByPopup","oauthState","location_1","res","_error","error_1","message","reflect","promise","requestByImage","src","timeout","loader","mapUrls","urls","promises","doLogout","logoutRedirectUrl","otherLogoutUrls","data","logout","register","authPageOrigin","noHeader","registerUrl","buildLoginQueryString","GLOBAL_CONTEXT","meSelector","state","requestMeTrySSO","loginByPage","loginPage","requestMeArgs","defaultAvatar","Avatar","path","className","useContext","LoginOrRegisterContext","useMemo","color","props","linkColorHover","Logout","getCurrentUrl","Logout$1","logoutHandler","useCallback","Paragraph","Typography","Wrap","UserAvatar","templateObject_2","templateObject_3","Name","templateObject_4","PopoverContent","toCenterPage","Menu","TopAvatar","Text","Me","Popover","Register","callRegister","useMe","useSelector","useTryGetMe","useDispatch","Or","LoginOrRegister","Login","login","LoginByPageOrRegister","LoginByPopupOrRegister","OrgIdentityType","OrgIdentityType$1","getOrgIdentityString","OrgIdentityTypeOptions","OrgIdentityStringOptions","RoleType","RoleType$1","UserIdentity","UserIdentity$1","UIType","UIType$1","TOKEN_CACHE","TOKEN_PARAMETER_KEY_CACHE","DEFAULT_TOKEN_PARAMETER_KEY","save","tokenParamKey","getTokenParamKey","getTokenLegacy","query","tpk","cache.getTokenParamKey","cache.getToken","cache.save","getTokenCacheWithKey","cacheTokenAndParamKey","jumpWithToken","target","qsStringifyOptions","tokenObject","search","newSearch","newUrl","DEFAULT_AUTH_HEADER_KEY","setHeaderToken","HTInterceptor"],"mappings":"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"}